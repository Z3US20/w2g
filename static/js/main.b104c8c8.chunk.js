(this.webpackJsonpw2g=this.webpackJsonpw2g||[]).push([[0],{2:function(e,t){e.exports={PLAY:"PLAY",PAUSE:"PAUSE",SYNC_TIME:"SYNC_TIME",NEW_VIDEO:"NEW_VIDEO",ASK_FOR_VIDEO_URL:"ASK_FOR_VIDEO_URL",SYNC_VIDEO_INFORMATION:"SYNC_VIDEO_INFORMATION",ASK_FOR_VIDEO_INFORMATION:"ASK_FOR_VIDEO_INFORMATION",JOIN_ROOM:"JOIN_ROOM",SEND_MESSAGE:"SEND_MESSAGE",RECEIVED_MESSAGE:"RECEIVED_MESSAGE",ASK_FOR_USERNAME:"ASK_FOR_USERNAME",SEND_USERNAME:"SEND_USERNAME"}},25:function(e,t,n){},48:function(e,t,n){},94:function(e,t,n){},98:function(e,t,n){"use strict";n.r(t);var s=n(1),a=n(16),r=n.n(a),o=(n(48),n(4)),c=n(5),i=n(7),u=n(6),l=n(24),m=n(41),d=n(2),h=n(0),O=function(e){var t=e.username,n=e.text;return Object(h.jsxs)("div",{className:"message-box",children:[Object(h.jsxs)("span",{className:"",children:[t,": "]}),Object(h.jsx)("span",{className:"",children:n})]})},j=function(e){Object(i.a)(n,e);var t=Object(u.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"componentWillUpdate",value:function(){var e=r.a.findDOMNode(this);this.shouldScrollToBottom=e.scrollTop+e.clientHeight+100>=e.scrollHeight}},{key:"componentDidUpdate",value:function(){if(this.shouldScrollToBottom){var e=r.a.findDOMNode(this);e.scrollTop=e.scrollHeight}}},{key:"render",value:function(){return Object(h.jsx)("div",{className:"chat-container",children:this.props.messages.map((function(e,t){return Object(h.jsx)(O,{username:e.username,text:e.text},t)}))})}}]),n}(s.Component),p=function(e){Object(i.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(o.a)(this,n);for(var s=arguments.length,a=new Array(s),r=0;r<s;r++)a[r]=arguments[r];return(e=t.call.apply(t,[this].concat(a))).state={message:""},e.handleChange=function(t){e.setState({[t.target.id]:t.target.value})},e.handleSubmit=function(t){t.preventDefault(),e.props.sendMessage(e.state.message),e.setState({message:""})},e}return Object(c.a)(n,[{key:"render",value:function(){return Object(h.jsx)("form",{onSubmit:this.handleSubmit,children:Object(h.jsx)("input",{autocomplete:"off",className:"msg-btn",placeholder:"Type message",id:"message",onChange:this.handleChange,value:this.state.message,required:!0})})}}]),n}(s.Component),b=function(e){var t=e.username;return Object(h.jsx)("div",{children:Object(h.jsx)("div",{className:"users",children:t})})},f=function(e){var t=e.users;return Object(h.jsx)("div",{className:"user-list",children:t.map((function(e,t){return Object(h.jsx)(b,{username:e},t)}))})},S=function(e){Object(i.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(o.a)(this,n);for(var s=arguments.length,a=new Array(s),r=0;r<s;r++)a[r]=arguments[r];return(e=t.call.apply(t,[this].concat(a))).sendMassage=function(t){e.props.socket.emit(d.SEND_MESSAGE,{username:e.props.username,text:t})},e}return Object(c.a)(n,[{key:"render",value:function(){return Object(h.jsxs)("div",{className:"chat",children:[Object(h.jsxs)("div",{className:"info",children:[Object(h.jsxs)("div",{className:"users-online",children:[Object(h.jsxs)("div",{children:["Watchers: ",this.props.users.length]}),Object(h.jsx)(f,{users:this.props.users})]}),Object(h.jsxs)("div",{className:"room-info",children:[Object(h.jsxs)("div",{children:["Your name: ",this.props.username]}),Object(h.jsxs)("div",{children:["Room id: ",this.props.room]})]})]}),Object(h.jsxs)("div",{className:"chat-box",children:[Object(h.jsx)(j,{messages:this.props.messages}),Object(h.jsx)(p,{className:"chat-send-msg",sendMessage:this.sendMassage})]})]})}}]),n}(s.Component),v=(n(25),n(63)),g={height:"480",width:"720",playerVars:{controls:2,rel:0,modestbranding:1,autoplay:1}},N=function(e){Object(i.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(o.a)(this,n);for(var s=arguments.length,a=new Array(s),r=0;r<s;r++)a[r]=arguments[r];return(e=t.call.apply(t,[this].concat(a))).state={socket:null,player:null,videoUrl:"",messages:[],users:[]},e.onSocketMethods=function(t){t.on("connect",(function(){t.emit(d.JOIN_ROOM,{room:e.props.room,username:e.props.username}),t.emit(d.ASK_FOR_VIDEO_INFORMATION)})),t.on("disconnect",(function(){console.log("Disconnected")})),t.on(d.PLAY,(function(){e.state.player.playVideo()})),t.on(d.PAUSE,(function(){e.state.player.pauseVideo()})),t.on(d.SYNC_TIME,(function(t){e.syncTime(t)})),t.on(d.NEW_VIDEO,(function(t){e.state.player.loadVideoById({videoId:e.getYoutubeIdByUrl(t)}),e.setState({videoUrl:""})})),t.on(d.ASK_FOR_VIDEO_INFORMATION,(function(){var n={url:e.state.player.getVideoUrl(),currentTime:e.state.player.getCurrentTime()};t.emit(d.SYNC_VIDEO_INFORMATION,n)})),t.on(d.SYNC_VIDEO_INFORMATION,(function(t){var n=e.getYoutubeIdByUrl(t.url);e.state.player.loadVideoById({videoId:n,startSeconds:t.currentTime})})),t.on(d.RECEIVED_MESSAGE,(function(t){e.setState({messages:[].concat(Object(l.a)(e.state.messages),[{username:t.username,text:t.text}])})})),t.on(d.ASK_FOR_USERNAME,(function(){e.setState({users:[]}),e.state.socket.emit(d.SEND_USERNAME,e.props.username)})),t.on(d.SEND_USERNAME,(function(t){e.setState({users:[].concat(Object(l.a)(e.state.users),[t])})}))},e.syncTime=function(t){(e.state.player.getCurrentTime()<t-.5||e.state.player.getCurrentTime()>t+.5)&&(e.state.player.seekTo(t),e.state.player.playVideo())},e.getYoutubeIdByUrl=function(e){return void 0!==(e=e.replace(/(>|<)/gi,"").split(/(vi\/|v=|\/v\/|youtu\.be\/|\/embed\/)/))[2]?e[2].split(/[^0-9a-z_-]/i)[0]:e},e.onReady=function(t){e.setState({player:t.target});var n=v("");e.setState({socket:n}),e.onSocketMethods(n)},e.onStateChanged=function(t){switch(e.state.player.getPlayerState()){case-1:e.state.socket.emit(d.PLAY);break;case 0:break;case 1:e.state.socket.emit(d.SYNC_TIME,e.state.player.getCurrentTime()),e.state.socket.emit(d.PLAY);break;case 2:e.state.socket.emit(d.PAUSE);break;case 3:e.state.socket.emit(d.SYNC_TIME,e.state.player.getCurrentTime())}},e.handleSubmit=function(t){t.preventDefault(),e.state.socket.emit(d.NEW_VIDEO,e.state.videoUrl)},e.handleChange=function(t){e.setState({[t.target.id]:t.target.value})},e}return Object(c.a)(n,[{key:"render",value:function(){return Object(h.jsxs)("div",{className:"grid",children:[Object(h.jsxs)("div",{className:"video",children:[Object(h.jsx)(m.a,{videoId:"",opts:g,onReady:this.onReady,onStateChange:this.onStateChanged,className:"yt"}),Object(h.jsxs)("form",{onSubmit:this.handleSubmit,children:[Object(h.jsx)("input",{autocomplete:"off",className:"url-input",type:"text",placeholder:"Insert Youtube URL",id:"videoUrl",value:this.state.videoUrl,onChange:this.handleChange}),Object(h.jsx)("button",{type:"submit",className:"url-btn",children:"New video"})]})]}),Object(h.jsx)(S,{username:this.props.username,room:this.props.room,messages:this.state.messages,users:this.state.users,socket:this.state.socket})]})}}]),n}(s.Component),E=(n(94),function(e){Object(i.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(o.a)(this,n);for(var s=arguments.length,a=new Array(s),r=0;r<s;r++)a[r]=arguments[r];return(e=t.call.apply(t,[this].concat(a))).state={roomid:"",yourname:""},e.handleChange=function(t){e.setState({[t.target.id]:t.target.value})},e.handleSubmit=function(t){t.preventDefault(),e.props.onSubmit(e.state.yourname,e.state.roomid)},e.handleRoomNameClick=function(t){e.setState({roomid:e.createRandomRoomName()})},e.createRandomRoomName=function(){for(var e="",t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=0;n<5;n++)e+=t.charAt(Math.floor(Math.random()*t.length));return e},e}return Object(c.a)(n,[{key:"render",value:function(){return Object(h.jsx)("div",{class:"container",children:Object(h.jsxs)("form",{onSubmit:this.handleSubmit,children:[Object(h.jsxs)("h1",{children:["W",Object(h.jsx)("font",{color:"orange",children:".2."}),"G"]}),Object(h.jsxs)("div",{className:"welcome-input",children:[Object(h.jsx)("input",{autocomplete:"off",value:this.state.yourname,onChange:this.handleChange,placeholder:"Name",required:!0,id:"yourname"})," ",Object(h.jsx)("br",{}),Object(h.jsx)("input",{autocomplete:"off",value:this.state.roomid,onChange:this.handleChange,placeholder:"Room id",required:!0,id:"roomid"})]}),Object(h.jsx)("button",{type:"submit",children:"Let me in!"}),Object(h.jsx)("button",{type:"button",onClick:this.handleRoomNameClick,children:"Random room id"})]})})}}]),n}(s.Component)),y=function(e){Object(i.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(o.a)(this,n);for(var s=arguments.length,a=new Array(s),r=0;r<s;r++)a[r]=arguments[r];return(e=t.call.apply(t,[this].concat(a))).state={username:"",room:"",currentScreen:"default"},e.onSubmit=function(t,n){e.setState({username:t,room:n,currentScreen:"HomeScreen"})},e}return Object(c.a)(n,[{key:"render",value:function(){var e;return"default"===this.state.currentScreen&&(e=Object(h.jsx)(E,{onSubmit:this.onSubmit})),"HomeScreen"===this.state.currentScreen&&(e=Object(h.jsx)(N,{room:this.state.room,username:this.state.username})),Object(h.jsx)("div",{className:"screen",children:e})}}]),n}(s.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(95).config(),r.a.render(Object(h.jsx)(y,{}),document.getElementById("app")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[98,1,2]]]);
//# sourceMappingURL=main.b104c8c8.chunk.js.map